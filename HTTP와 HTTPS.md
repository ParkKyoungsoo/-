## HTTP란?

#### HTTP - Hypertext transfer protocol

- HTML문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜
- 웹에서 이루어지는 모든 데이터 교환의 기초
- 클라이언트 - 서버 프로토콜



#### 문제점

- 암호화 되지 않은 평문으로 통신하기 때문에 도청이 가능하다 -> 네트워크 상의 흐르는 패킷을 수집하여 도창할 수 있다.
- 통신 상대를 확인하지 않기 떄문에 위장이 가능하다.
- 완전성을 증명할 수 없기 때문에 변조가 가능하다.



#### TCP/IP 는 도청 가능한 네트워크

TCP/IP 구조의 통신은 전부 통신 경로 상에서 엿볼 수 있다. 패킷을 수집하는 것만으로 도청 할 수 있다. 평문으로 통신을 할 경우 메시지의 의미를 파악 할 수 있기 떄문에 암호화하여 통신해야 한다.

##### 보안방법

 1. 통신 자체를 암호화 SSL(Secure Socket Layer) or TLS(Transport Layer Security) 라는 다른 프로토콜을 조합함으로써 HTTP의 통신 내용을 암호화 할 수 있다. SSL을 조합한 HTTP를 HTTPS(HTTP Secure) or HTTP over SSL 이라고 부른다.

    

 2. 콘텐츠를 암호화 말 그대로 HTTP를 사용해서 운반하는 내용인, HTTP 메시지에 포함되는 콘텐츠만 암호화 하는것이다. 암호화해서 전송하면 받은 측에서는 그 암호를 해독하여 출력하는 처리가 필요하다.





#### 통신 상대를 확인하지 않기 때문에 위장이 가능하다.

HTTP에 의한 통신에는 상대가 누구인지 확인하는 처리는 없기 때문에 누구든지 리퀘스트를 보낼 수 있다. IP 주소나 포트 등에서 그 웹 서버에 액세스 제한이 없는 경우 리퀘스트가 오면 상대가 누구든지 무언가의 리스폰스를 반환한다. 이러한 특징은 여러 문제점을 유발한다.

1. 리퀘스트르 보낸 곳의 웹 서버가 원래 의도한 리스폰스를 보내야 하는 웹 서버인지를 확인할 수 없다.
2. 리스폰스를 반환한 곳의 클라이언트가 원래 의도한 리퀘스트를 보낸 클라이언트인지 확인할 수 없다.
3. 통신하고 있는 상대가 접근이 허가된 상대인지를 확인할 수 없다.
4. 어디에서 누가 리퀘스트를 했는지 확인할 수 없다.
5. 의미없는 리퀘스트도 수신한다. -> DoS 공격을 방지할 수 없다.

##### 보완 방법

위 암호화 방법으로 언급된 SSL 로 상대를 확인할 수 있다. SSL은 상대를 확인하는 수단으로 **증명서**를 제공하고 있다. 증명서는 신뢰할 수 있는 **제 3자 기관에 의해** 발행되는 것이기 때문에 서버나 클라이언트가 실재하는 사실을 증명한다. 이 증명서를 이용함으로써 통신 상대가 내가 통신하고자 하는 서버임을 나타내고 이용자는 개인 정보 누설등의 위험성이 줄어들게 된다. 한 가지 이점을 더 꼽자면 클라이언트는 이 증명서로 본인 확인을 하고 웹 사이트 인증에서도 이용할 수 있다.



#### 완전성을 증명할 수 없기 때문에 변조가 가능하다.

완전성이란 **정보의 정확성**을 의미한다. 서버 또는 클라이언트에서 수신한 내용이 송신측에서 보낸 내용과 일치한다라는 것을 보장할 수 없는 것이다. 리퀘스트나 리스폰스가 발신된 후에 상대가 수신하는 사이에 누군가에 의해 변조되더라도 이 사실을 알 수 없다. 이와 같이 공격자가 도중에 리퀘스트나 리스폰스를 빼앗아 변조하는 공격을 중간자 공격(Man-in-middle)이라고 부른다.



##### 보완 방법

 ~~MD5, SHA-1 등의 해시 값을 확인하는 방법과 파일의 디지털 서명을 확인하는 방법이 존재하지만 확실히 확인할 수 있는 것은 아니다. 확실히 방지하기 위해서는  HTTPS를 사용해야 한다. SSL에는 인증이나 암호화, 그리고 다이제스트 기능을 제공하고 있다.~~



 


## HTTPS란?

#### HTTPS - HTTP + Secure

- HTTP 통신을 하는 소켓 부분을 SSL(Secure Socket Layer)이나 TSL 이라는 프로토콜로 대체
- 새로운 어플리케이션 계층의 프로토콜이 아니다.

기존 HTTP는 원래 TCP와 직접 통신했지만, HTTPS 에서 HTTP는 SSL 과 통신하고 SSL이 TCP와 통신하게 된다. SSL 을 사용한 HTTPS는 암호화와 증명서, 안전성 보호를 이용할 수 있게 된다.

![1_6FF1I3hwc7e_BgXXoAOieA](https://user-images.githubusercontent.com/44697835/101485628-bfc66b80-399e-11eb-8572-e55b349277ca.png)



HTTPS 의 SSL 에서는 공통키 암호화 방식과 공개키 암호화 방식을 혼합한 하이브리드 암호 시스템을 사용한다. 공통키를 공개키 암호화 방식으로 교환한 다음에 다음부터의 통신은 공통키 암호를 사용하는 방식이다.



##### 공통키 방식(대칭키 방식)

- 동일한 키로 암호화와 복호화를 같이 할 수 있는 방식
- 대칭키가 유출되면 암호가 무용지물이 될 수 있다.



##### 공개키 방식

- A키를 암호화 하면 B키로 복호화 할  수 있고, B키로 암호화하면 A키로 복호화할 수 있는 방식
- 두개의 키 중 하나를 비공개 키로 하고, 나머지를 공개키로 지정
- 비공개키는 자신만이 가지고 있고, 공개키를 타인에게 제공





### ->  TCP가 왜 신뢰성이 없는가? 



이미지 출처 - https://medium.com/@abhishek.tamrakar/infrastructure-security-ssl-tls-certificates-and-challenges-9464d75a5e17

내용 출처 - [http와 https차이](https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/Network#http%EC%99%80-https) / [SSL이란?](https://12bme.tistory.com/80)

